<div class="screen" id="setup-screen">
    <div class="setup-container">
        <div class="setup-header">
            <h1>Setup QuickERP</h1>
            <div class="setup-guide-link">
                <a href="#" data-site-path="EXTENSION_SETUP_PATH" target="_blank" class="guide-link">
                    üìñ View Setup Guide
                </a>
            </div>
            <div class="setup-progress">
                <div class="progress-dots">
                    <span class="dot active" data-step="1"></span>
                    <span class="dot" data-step="2"></span>
                    <span class="dot" data-step="3"></span>
                </div>
                <p class="step-info">Step <span id="current-step">1</span> of 3</p>
            </div>
        </div>
        
        <div class="setup-content">
            <!-- Step 1: Credentials -->
            <div class="step active" data-step="1">
                <div class="step-header">
                    <h2>üîê ERP Credentials</h2>
                    <p>Enter your IIT KGP ERP login details</p>
                </div>
                <form id="credentials-form" class="setup-form">
                    <div class="form-group">
                        <label for="roll-number">Roll Number</label>
                        <input type="text" id="roll-number" placeholder="e.g., 22MA100xx" required>
                    </div>
                    <div class="form-group">
                        <label for="password">Password</label>
                        <div class="password-input-wrapper">
                            <input type="password" id="password" placeholder="Your ERP password" required>
                            <button type="button" class="password-toggle" id="password-toggle">üëÅÔ∏è</button>
                        </div>
                    </div>
                </form>
            </div>
            
            <!-- Step 2: Security Questions -->
            <div class="step" data-step="2">
                <div class="step-header">
                    <h2>üõ°Ô∏è Security Questions</h2>
                    <p>Add your ERP security questions and answers</p>
                </div>
                <form id="security-form" class="setup-form">
                    <div class="security-questions"></div>
                    <button type="button" id="add-security-question" class="btn-secondary btn-small">+ Add Question</button>
                </form>
            </div>
            
            <!-- Step 3: Gmail Integration -->
            <div class="step" data-step="3">
                <div class="step-header">
                    <h2>üìß Gmail Integration</h2>
                    <p>Connect Gmail for automatic OTP retrieval</p>
                </div>
                <div class="gmail-setup">
                    <div class="info-box">
                        <div class="info-header">
                            <span class="info-icon">üìß</span>
                            <strong>Gmail Connection</strong>
                        </div>
                        <div class="info-content">
                            <p>Connect Gmail to automatically retrieve OTP codes during login.</p>
                            <div class="info-features">
                                <span class="feature-item">üîí Read-only access</span>
                                <span class="feature-item">üíæ Secure storage</span>
                                <span class="feature-item">üîÑ Revocable anytime</span>
                            </div>
                            <div class="info-requirement">
                                <p>‚ö†Ô∏è Only <strong>@gmail.com</strong> accounts are supported</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="warning-box">
                        <div class="warning-header">
                            <span class="warning-icon">‚ö†Ô∏è</span>
                            <strong>Security Warning Expected</strong>
                        </div>
                        <div class="warning-content">
                            <p>Google will show a security warning saying <strong>"This app isn't verified"</strong>. This is normal for unverified applications.</p>
                            <div class="warning-steps">
                                <p><strong>To proceed:</strong></p>
                                <ol>
                                    <li>Click <strong>"Advanced"</strong> on the warning screen</li>
                                    <li>Click <strong>"Go to QuickERP (unsafe)"</strong></li>
                                    <li>Continue with the sign-in process</li>
                                    <li>Grant the requested permissions</li>
                                </ol>
                            </div>
                            <div class="warning-explanation">
                                <p><strong>Why this warning?</strong></p>
                                <p>QuickERP is safe and open-source. The warning appears because we haven't completed Google's verification process. Your data is processed locally and never shared externally.</p>
                            </div>
                            <div class="warning-note">
                                <p><strong>‚ö†Ô∏è Upgrading from an older version?</strong></p>
                                <p>If Gmail connection fails, remove old permissions first:</p>
                                <ol>
                                    <li>Visit <a href="https://myaccount.google.com/permissions" target="_blank" class="permission-link">Google Account Permissions</a></li>
                                    <li>Find and remove "QuickERP" from the list</li>
                                    <li>Come back and try connecting again</li>
                                </ol>
                            </div>
                            <div class="warning-link">
                                <p>üìñ <a href="https://quickerp.rknain.com/blogs/setup" target="_blank" class="blog-link">View complete setup guide with screenshots</a></p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="gmail-actions">
                        <button id="gmail-connect" class="btn-primary">
                            <span>üîó Connect Gmail</span>
                        </button>
                        <a href="#" data-site-path="OAUTH_SETUP_PATH" target="_blank" class="btn-secondary github-link">
                            <span>‚öôÔ∏è Setup Custom OAuth</span>
                        </a>
                    </div>
                    <div class="gmail-status"></div>
                </div>
            </div>
            
        </div>
        <div class="setup-navigation sticky-bottom">
            <div class="nav-top-row">
                <div class="version-info">
                    <span class="version-text">v<span id="setup-version">1.3.0</span></span>
                    <span class="version-status" id="setup-version-status"></span>
                </div>
            </div>
            <div class="nav-bottom-row">
                <button id="back-btn" class="btn-secondary" disabled>Back</button>
                <button id="next-btn" class="btn-primary">Next</button>
            </div>
        </div>
    </div>
